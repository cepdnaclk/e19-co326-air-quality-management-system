<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="390px" preserveAspectRatio="none" style="width:847px;height:390px;" version="1.1" viewBox="0 0 847 390" width="847.2px" zoomAndPan="magnify"><defs><filter height="300%" id="f5fhc5i4jav5v" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f5fhc5i4jav5v)" height="136.3969" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="688.2" y="83.3156"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="43.2" x2="43.2" y1="45.9563" y2="342.75"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="694.2" x2="694.2" y1="45.9563" y2="342.75"/><rect fill="#FEFECE" filter="url(#f5fhc5i4jav5v)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="63.6" x="9.6" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="18" y="27.5941">Client</text><rect fill="#FEFECE" filter="url(#f5fhc5i4jav5v)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="63.6" x="9.6" y="341.55"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="46.8" x="18" y="365.5441">Client</text><rect fill="#FEFECE" filter="url(#f5fhc5i4jav5v)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="242.4" x="570.6" y="3.6"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="225.6" x="579" y="27.5941">Device Registration Service</text><rect fill="#FEFECE" filter="url(#f5fhc5i4jav5v)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="242.4" x="570.6" y="341.55"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="225.6" x="579" y="365.5441">Device Registration Service</text><rect fill="#FFFFFF" filter="url(#f5fhc5i4jav5v)" height="136.3969" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="688.2" y="83.3156"/><polygon fill="#A80036" points="673.8,78.5156,685.8,83.3156,673.8,88.1156,678.6,83.3156" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="43.8" x2="681" y1="83.3156" y2="83.3156"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="367.2" x="52.2" y="77.2365">transfer(subject: "assert", device-id, gateway-id)</text><path d="M549.6,98.9156 L549.6,182.9156 L832.8,182.9156 L832.8,110.9156 L820.8,98.9156 L549.6,98.9156 " fill="#FBFB77" filter="url(#f5fhc5i4jav5v)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M820.8,98.9156 L820.8,110.9156 L832.8,110.9156 L820.8,98.9156 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="76.8" x="556.8" y="119.3959">verify that</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="202.8" x="556.8" y="137.5553">- device and gateway exist</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="258" x="556.8" y="155.7146">- device and gateway are enabled</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="256.8" x="556.8" y="173.874">- gateway is authorized for device</text><polygon fill="#A80036" points="57,214.9125,45,219.7125,57,224.5125,52.2,219.7125" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="49.8" x2="693" y1="219.7125" y2="219.7125"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="615.6" x="64.2" y="213.6334">transfer(status: "200", content-type: "application/json", body: registration status)</text><path d="M49.2,235.3125 L49.2,319.3125 L247.2,319.3125 L247.2,247.3125 L235.2,235.3125 L49.2,235.3125 " fill="#FBFB77" filter="url(#f5fhc5i4jav5v)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M235.2,235.3125 L235.2,247.3125 L247.2,247.3125 L235.2,235.3125 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="172.8" x="56.4" y="255.7928">JSON payload contains</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="79.2" x="56.4" y="273.9521">- device-id</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="110.4" x="56.4" y="292.1115">- via (optional)</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="150" x="56.4" y="310.2709">- defaults (optional)</text><!--
@startuml
scale 1.2

Client -> "Device Registration Service": transfer(subject: "assert", device-id, gateway-id)
activate "Device Registration Service"
note over "Device Registration Service"
verify that
- device and gateway exist
- device and gateway are enabled
- gateway is authorized for device
end note

"Device Registration Service" -> Client: transfer(status: "200", content-type: "application/json", body: registration status)
deactivate "Device Registration Service"

note right of Client
JSON payload contains
- device-id
- via (optional)
- defaults (optional)
end note
@enduml

PlantUML version 1.2019.07beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>